(this.webpackJsonphero_admin_panel=this.webpackJsonphero_admin_panel||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var c,r,a=n(0),i=n.n(a),s=n(9),o=n.n(s),l=n(6),u=n(20),b=n(38),d=n(31),j=n.n(d),h=n(34),f=n(7),O=function(){var e=Object(a.useState)("waiting"),t=Object(f.a)(e,2),n=t[0],c=t[1],r=Object(a.useCallback)(function(){var e=Object(h.a)(j.a.mark((function e(t){var n,r,a,i,s,o=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",r=o.length>2&&void 0!==o[2]?o[2]:null,a=o.length>3&&void 0!==o[3]?o[3]:{"Content-Type":"application/json"},c("loading"),e.prev=4,e.next=7,fetch(t,{method:n,body:r,headers:a});case 7:if((i=e.sent).ok){e.next=16;break}return e.t0=Error,e.t1="Could not to fetch ".concat(t,", status "),e.next=13,i;case 13:throw e.t2=e.sent.status,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 16:return e.next=18,i.json();case 18:return s=e.sent,c("confirmed"),e.abrupt("return",s);case 23:throw e.prev=23,e.t4=e.catch(4),c("error"),e.t4;case 27:case 28:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(t){return e.apply(this,arguments)}}(),[]),i=Object(a.useCallback)((function(){return c("waiting")}),[]);return{process:n,setProcess:c,clearError:i,request:r}},m=n(58),p=n(60),x=n(5),g=Object(x.b)("HEROES_FETCHING"),v=Object(x.b)("HEROES_FETCHED"),N=Object(x.b)("HEROES_FETCHING_ERROR"),E=Object(x.b)("HERO_DELETED"),y=Object(x.b)("HERO_CREATERD"),w=Object(x.b)("FILTERS_FETCHING"),_=Object(x.b)("FILTERS_FETCHED"),R=Object(x.b)("FILTERS_FETCHING_ERROR"),S=Object(x.b)("CHANGE_ACTIVE_FILTER"),C=n(1),F=function(e){var t,n=e.name,c=e.description,r=e.element,a=e.onDeleteHero;switch(r){case"fire":t="bg-danger bg-gradient";break;case"water":t="bg-primary bg-gradient";break;case"wind":t="bg-success bg-gradient";break;case"earth":t="bg-secondary bg-gradient";break;default:t="bg-warning bg-gradient"}return Object(C.jsxs)("li",{className:"card flex-row mb-4 shadow-lg text-white ".concat(t),children:[Object(C.jsx)("img",{src:"http://www.stpaulsteinbach.org/wp-content/uploads/2014/09/unknown-hero.jpg",className:"img-fluid w-25 d-inline",alt:"unknown hero",style:{objectFit:"cover"}}),Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("h3",{className:"card-title",children:n}),Object(C.jsx)("p",{className:"card-text",children:c})]}),Object(C.jsx)("span",{className:"position-absolute top-0 start-100 translate-middle badge border rounded-pill bg-light",children:Object(C.jsx)("button",{onClick:a,type:"button",className:"btn-close btn-close","aria-label":"Close"})})]})},T=function(){return Object(C.jsx)("div",{className:"spinner-border mx-auto mt-5",role:"status",children:Object(C.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},L=(n(50),n(13)),k=function(){var e=Object(l.b)(),t=O().request,n=Object(L.a)((function(e){return e.filtersReducer.activeFilter}),(function(e){return e.heroesReducer.heroes}),(function(e,t){return"all"===e?t:t.filter((function(t){return t.element===e}))})),c=Object(l.c)((function(e){return e.heroesReducer})).heroesLoadingStatus,r=Object(l.c)(n);Object(a.useEffect)((function(){e(function(e){return function(t){t(g()),e("http://localhost:3001/heroes").then((function(e){return t(v(e))})).catch((function(){return t(N)}))}}(t))}),[]);var i=function(n){t("http://localhost:3001/heroes/".concat(n),"DELETE").then((function(){return function(t){e(E(t))}(n)})).catch((function(){return alert("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a...")}))};if("loading"===c)return Object(C.jsx)(T,{});if("error"===c)return Object(C.jsx)("h5",{className:"text-center mt-5",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438"});var s,o=0===(s=r).length?Object(C.jsx)(m.a,{classNames:"heroes__text",timeout:1,children:Object(C.jsx)("h5",{className:"text-center heroes__text",children:"\u0413\u0435\u0440\u043e\u0435\u0432 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442"})}):s.map((function(e){var t=e.id,n=Object(b.a)(e,["id"]);return Object(C.jsx)(m.a,{classNames:"heroes__item",timeout:250,children:Object(C.jsx)(F,Object(u.a)(Object(u.a)({},n),{},{onDeleteHero:function(){return i(t)}}),t)},t)}));return Object(C.jsx)("ul",{className:"heroes__list",children:Object(C.jsx)(p.a,{component:null,children:o})})},H=n(19),I=n(22),D=n(59),q=(n(51),function(){return Object(C.jsxs)("svg",{className:"spinner-dots",width:"60",height:"30",children:[Object(C.jsx)("circle",{cx:"15",cy:"15",r:"6",children:Object(C.jsx)("animate",{attributeName:"opacity",values:"0;1;0",dur:"1s",repeatCount:"indefinite"})}),Object(C.jsx)("circle",{cx:"30",cy:"15",r:"6",children:Object(C.jsx)("animate",{attributeName:"opacity",values:"0;1;0",dur:"1s",begin:"0.2s",repeatCount:"indefinite"})}),Object(C.jsx)("circle",{cx:"45",cy:"15",r:"6",children:Object(C.jsx)("animate",{attributeName:"opacity",values:"0;1;0",dur:"1s",begin:"0.4s",repeatCount:"indefinite"})})]})}),G=function(){var e=O().request,t=Object(l.b)(),n=Object(l.c)((function(e){return e.filtersReducer})).filters,c=function(e){t(y(e))};return Object(C.jsx)(H.c,{initialValues:{name:"",description:"",element:""},validationSchema:I.a({name:I.b().min(3,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430!").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"),description:I.b().min(3,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430!").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"),element:I.b().required("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442!")}),onSubmit:function(t,n){(0,n.resetForm)();var r=Object(u.a)({id:Object(D.a)()},t);e("http://localhost:3001/heroes","POST",JSON.stringify(r)).then((function(){return c(r)})).catch((function(){return alert("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a")}))},children:function(e){var t,c=e.errors,r=e.touched,a=function(e,t){return e&&t?"is-invalid":t&&!e?"is-valid":void 0};return Object(C.jsxs)(H.b,{className:"border p-4 shadow-lg rounded",children:[Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)("label",{htmlFor:"name",className:"form-label fs-4",children:"\u0418\u043c\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0433\u0435\u0440\u043e\u044f"}),Object(C.jsx)(H.a,{type:"text",name:"name",className:"form-control ".concat(a(c.name,r.name)),id:"name",placeholder:"\u041a\u0430\u043a \u043c\u0435\u043d\u044f \u0437\u043e\u0432\u0443\u0442?"})]}),Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)("label",{htmlFor:"description",className:"form-label fs-4",children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(C.jsx)(H.a,{as:"textarea",name:"description",className:"form-control ".concat(a(c.description,r.description)),id:"description",placeholder:"\u0427\u0442\u043e \u044f \u0443\u043c\u0435\u044e?",style:{height:"130px"}})]}),0===n.length?Object(C.jsx)(q,{}):Object(C.jsxs)("div",{className:"mb-3",children:[Object(C.jsx)("label",{htmlFor:"element",className:"form-label",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0433\u0435\u0440\u043e\u044f"}),Object(C.jsxs)(H.a,{as:"select",className:"form-control ".concat(a(c.element,r.element)),id:"element",name:"element",children:[Object(C.jsx)("option",{value:"",children:"\u042f \u0432\u043b\u0430\u0434\u0435\u044e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u043c..."}),(t=n,t.map((function(e){var t=e.label,n=e.value;return"\u0412\u0441\u0435"===t?null:Object(C.jsx)("option",{value:n,children:t},t)})))]})]}),Object(C.jsx)("button",{type:"submit",className:"btn btn-primary",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})}})},A=(n(52),function(){var e=Object(l.c)((function(e){return e.filtersReducer})),t=e.filters,n=e.filtersLoadingStatus,c=e.activeFilter,r=O().request,i=Object(l.b)();Object(a.useEffect)((function(){s()}),[]);var s=function(){i(w()),r("http://localhost:3001/filters").then((function(e){return i(_(e))})).catch((function(){return i(R())}))},o=function(e){var t=e.target.getAttribute("data-filter");i(S(t))},u="loading"===n?Object(C.jsx)(q,{}):null,b=t.map((function(e,t){var n=e.label,r=e.value,a=e.style;return Object(C.jsx)("button",{onClick:o,"data-filter":r,className:"btn ".concat(a," ").concat(r===c?"active":""),children:n},t)})),d="error"===n?Object(C.jsx)("span",{children:Object(C.jsx)("b",{children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."})}):null;return Object(C.jsx)("div",{className:"card shadow-lg mt-4",children:Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("p",{className:"card-text",children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0439\u0442\u0435 \u0433\u0435\u0440\u043e\u0435\u0432 \u043f\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u043c"}),Object(C.jsxs)("div",{className:"btn-group",children:[u,b,d]})]})})}),J=(n(53),function(){return Object(C.jsx)("main",{className:"app",children:Object(C.jsxs)("div",{className:"content",children:[Object(C.jsx)(k,{}),Object(C.jsxs)("div",{className:"content__interactive",children:[Object(C.jsx)(G,{}),Object(C.jsx)(A,{})]})]})})}),P=n(4),V=Object(x.c)({heroes:[],heroesLoadingStatus:"idle"},(c={},Object(P.a)(c,g,(function(e){e.heroesLoadingStatus="loading"})),Object(P.a)(c,N,(function(e){e.heroesLoadingStatus="error"})),Object(P.a)(c,v,(function(e,t){e.heroes=t.payload,e.heroesLoadingStatus="idle"})),Object(P.a)(c,y,(function(e,t){e.heroes.push(t.payload)})),Object(P.a)(c,E,(function(e,t){e.heroes=e.heroes.filter((function(e){return e.id!==t.payload}))})),c),[],(function(e){return e})),B=Object(x.c)({filters:[],filtersLoadingStatus:"idle",activeFilter:"all"},(r={},Object(P.a)(r,w,(function(e){e.filtersLoadingStatus="loading"})),Object(P.a)(r,_,(function(e,t){e.filters=t.payload,e.filtersLoadingStatus="idle"})),Object(P.a)(r,R,(function(e){e.filtersLoadingStatus="error"})),Object(P.a)(r,S,(function(e,t){e.activeFilter=t.payload})),r),[],(function(e){return e})),M=function(e){return function(e){return function(t){return e("string"===typeof t?{type:t}:t)}}},z=Object(x.a)({reducer:{heroesReducer:V,filtersReducer:B},middleware:function(e){return e().concat(M)},devTools:!1});n(54);o.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(l.a,{store:z,children:Object(C.jsx)(J,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.603470c9.chunk.js.map